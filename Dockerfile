# ??? Dockerfile ?????
FROM python:3.9-slim

ENV PYTHONUNBUFFERED=1 \
    PORT=8080 \
    PIP_DISABLE_PIP_VERSION_CHECK=1

WORKDIR /app

# ????????
COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

# ???? + ?? + ??
COPY . .    # ???????????? COPY services/ data/ scripts/ main.py ?

# === ?????????????===
RUN python scripts/offline_prepare.py

# ?? gunicorn??????????
EXPOSE 8080
CMD ["gunicorn", "--bind", "0.0.0.0:8080", "--timeout", "600", "main:app"]

